<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Libre+Baskerville&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;background:#f4efe9;font-family:'Libre Baskerville',serif;color:#3b2f2f}

/* ===== PAGE SYSTEM ===== */
#pages{width:100%;height:100%;position:relative}

.page{
  position:absolute;inset:0;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  text-align:center;padding:24px;
  opacity:0;transform:translateX(40px);
  transition:1.2s ease;pointer-events:none;
  overflow:hidden;
}
.page.active{opacity:1;transform:translateX(0);pointer-events:auto}

/* TEXT */
h1,h2{font-family:'Cormorant Garamond',serif;font-weight:600}
h1{font-size:2.4rem}h2{font-size:1.6rem}
p{font-size:1rem;line-height:1.8;max-width:320px;margin-top:16px}

/* ===== SHAPES DECORATION ===== */
.shape{
  position:absolute;
  opacity:0.15;
  pointer-events:none;
}
.shape.circle{border-radius:50%;}
.shape.star{
  width:0;height:0;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-bottom:20px solid #ff5f5f;
  transform:rotate(35deg);
}
.shape.heart{
  width:20px;height:20px;
  background:red;
  clip-path: polygon(50% 0%, 61% 12%, 75% 12%, 87% 25%, 100% 40%, 87% 60%, 50% 100%, 13% 60%, 0% 40%, 13% 25%, 25% 12%, 39% 12%);
}

/* ===== CAKE ===== */
.cake{
  width:190px;height:120px;background:#d3a06c;
  border-radius:20px;margin-top:24px;
  position:relative;box-shadow:0 14px 26px rgba(0,0,0,.18);
  cursor:pointer;
}
.candle{width:10px;height:36px;background:#fff;position:absolute;top:-36px}
.flame{width:12px;height:12px;background:orange;border-radius:50%;
  animation:flicker .25s infinite alternate}
@keyframes flicker{from{transform:scale(1)}to{transform:scale(1.3)}}

/* ===== EXPLOSION ===== */
.crumb{
  position:absolute;width:10px;height:10px;background:#c28b5a;
  border-radius:4px;
  animation:explode 1.2s ease forwards;
}
@keyframes explode{
  to{transform:translate(var(--x),var(--y)) rotate(720deg);opacity:0}
}

/* ===== SLIDESHOW ===== */
.slideshow{position:absolute;inset:0;display:none;justify-content:center;align-items:center;background:#f4efe9}

/* PHOTO SLIDE */
.photo-slide{
  position:absolute;inset:0;display:flex;
  justify-content:center;align-items:center;
  opacity:0;transition:opacity 2.2s ease;
}
.photo-slide.active{opacity:1}

/* ===== PHOTO FRAME (4:8) ===== */
.photo-frame{
  width:85vw;max-width:420px;aspect-ratio:4/8;
  background:#efe7dc;padding:12px;border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,.18),
  inset 0 0 0 1px rgba(0,0,0,.05);
  display:flex;justify-content:center;align-items:center;
}
.photo-frame img{width:100%;height:100%;object-fit:cover;border-radius:12px}

/* TEXT SLIDE */
.text-slide{
  position:absolute;inset:0;display:flex;
  justify-content:center;align-items:center;
  background:radial-gradient(circle,#f7f2eb,#e6ddcf);
  opacity:0;transition:opacity 1.5s ease;
}
.text-slide.active{opacity:1}
.text-box{
  background:rgba(255,255,255,.75);padding:30px 28px;
  border-radius:22px;max-width:80%;font-size:1.05rem;line-height:1.9
}

/* TYPEWRITER */
.typewriter::after{content:"|";margin-left:4px;animation:blink 1s infinite;opacity:.6}
@keyframes blink{0%,50%{opacity:1}50.01%,100%{opacity:0}}

/* FILM GRAIN */
body::after{
  content:"";position:fixed;inset:0;
  background:url("https://grainy-gradients.vercel.app/noise.svg");
  opacity:.1;pointer-events:none;
}

/* ===== CONFETTI ===== */
.confetti{
  position:absolute;
  width:10px;height:10px;
  background:red;
  top:0;left:50%;
  pointer-events:none;
  opacity:0.9;
  border-radius:50%;
  animation:fall linear forwards;
}
@keyframes fall{
  0%{transform:translateY(0) rotate(0deg);}
  100%{transform:translateY(120vh) rotate(360deg);}
}
</style>
</head>

<body>

<audio id="music" src="timur.mp3" loop></audio>

<div id="pages">

<section class="page active" id="page0">
  <h1>Happy Birthday,<br>my favorite person.</h1>
  <p>tap anywhere</p>
</section>

<section class="page" id="page1">
  <h2>Another year.</h2>
  <p>Still choosing you.</p>
</section>

<section class="page" id="cakePage">
  <h2>Make a wish.</h2>
  <div class="cake" id="cake">
    <div class="candle" style="left:45px"><div class="flame"></div></div>
    <div class="candle" style="left:90px"><div class="flame"></div></div>
    <div class="candle" style="left:135px"><div class="flame"></div></div>
  </div>
  <p style="font-size:.8rem;opacity:.7">tap the cake</p>
</section>

<div class="slideshow" id="slideshow">

  <div class="photo-slide">
    <div class="photo-frame"><img src="photos/1.png"></div>
  </div>
  <div class="text-slide"><div class="text-box"></div></div>
  <div class="photo-slide"><div class="photo-frame"><img src="photos/2.jpg"></div></div>
  <div class="photo-slide"><div class="photo-frame"><img src="photos/3.jpg"></div></div>
  <div class="photo-slide"><div class="photo-frame"><img src="photos/4.jpeg"></div></div>
  <div class="text-slide"><div class="text-box"></div></div>

</div>
</div>

<script>
/* ===== PAGE NAV ===== */
const pages=document.querySelectorAll(".page");
let current=0;
function nextPage(){
  if(current<pages.length-1){
    pages[current].classList.remove("active");
    current++;
    pages[current].classList.add("active");
    addShapes(current);
  }
}
document.body.addEventListener("click",()=>{if(current!==2)nextPage()});

/* ===== TYPEWRITER ===== */
function typeWriter(el,text,speed=45){
  el.textContent="";
  el.classList.add("typewriter");
  let i=0;
  const typing=setInterval(()=>{
    el.textContent+=text.charAt(i);
    i++;
    if(i>=text.length){
      clearInterval(typing);
      el.classList.remove("typewriter");
    }
  },speed);
}

/* ===== SLIDESHOW + CONFETTI ===== */
const cake=document.getElementById("cake");
const flames=document.querySelectorAll(".flame");
const music=document.getElementById("music");
const slideshow=document.getElementById("slideshow");
const photos=document.querySelectorAll(".photo-slide");
const textSlides=document.querySelectorAll(".text-slide");
const textBox=document.querySelectorAll(".text-box");

const texts=[
  "You turn quiet moments into memories I want to keep.",
  "Still you. Still my favorite person to come back to."
];

let started=false;
let step=0;

cake.addEventListener("click",async e=>{
  e.stopPropagation();
  flames.forEach(f=>f.style.display="none");

  // Cake explode crumbs
  for(let i=0;i<22;i++){
    const c=document.createElement("div");
    c.className="crumb";
    c.style.left="90px";
    c.style.top="55px";
    c.style.setProperty("--x",`${(Math.random()-0.5)*420}px`);
    c.style.setProperty("--y",`${(Math.random()-0.5)*320}px`);
    cake.appendChild(c);
  }
  cake.style.opacity="0";

  // Confetti
  for(let i=0;i<80;i++){
    const conf=document.createElement("div");
    conf.className="confetti";
    conf.style.background=['#ff5f5f','#fce18a','#9cff5f','#5f9cff','#d05fff'][Math.floor(Math.random()*5)];
    conf.style.left=Math.random()*100+'vw';
    conf.style.width=5+Math.random()*8+'px';
    conf.style.height=5+Math.random()*8+'px';
    conf.style.animationDuration=(2+Math.random()*3)+'s';
    document.body.appendChild(conf);
    setTimeout(()=>conf.remove(),5000);
  }

  // Music
  if(!started){
    started=true;
    music.volume=0;
    await music.play();
    let v=0;
    const fade=setInterval(()=>{
      v+=0.05;
      music.volume=v;
      if(v>=1)clearInterval(fade);
    },120);
  }

  slideshow.style.display="flex";
  photos[0].classList.add("active");

  setInterval(()=>{
    step++;
    photos.forEach(p=>p.classList.remove("active"));
    textSlides.forEach(t=>t.classList.remove("active"));

    switch(step){
      case 1:
        textBox[0].textContent = "";
        typeWriter(textBox[0], texts[0]);
        textSlides[0].classList.add("active");
        break;
      case 2:
        photos[1].classList.add("active");
        break;
      case 3:
        photos[2].classList.add("active");
        break;
      case 4:
        photos[3].classList.add("active");
        break;
      case 5:
        textBox[1].textContent = "";
        typeWriter(textBox[1], texts[1]);
        textSlides[1].classList.add("active");
        break;
    }
  },4500);
});

/* ===== ADD SHAPES DECOR ===== */
function addShapes(pageIndex){
  const page=pages[pageIndex];
  if(!page) return;
  const shapes=['circle','star','heart'];
  for(let i=0;i<8;i++){
    const s=document.createElement('div');
    const type=shapes[Math.floor(Math.random()*shapes.length)];
    s.className='shape '+type;
    s.style.top=Math.random()*80+'%';
    s.style.left=Math.random()*80+'%';
    const size=10+Math.random()*20;
    s.style.width=size+'px';
    s.style.height=size+'px';
    s.style.background=['#ff5f5f','#fce18a','#9cff5f','#5f9cff','#d05fff'][Math.floor(Math.random()*5)];
    page.appendChild(s);
  }
}

// Initial shapes for first page
addShapes(0);
</script>

</body>
</html>
